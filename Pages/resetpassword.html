<!doctypehtml><html lang=uk><meta charset=UTF-8><meta content="width=device-width,initial-scale=1"name=viewport><title>KUBUMIX | RESET PASSWORD</title><style>@font-face{font-family:KubumixOne;src:url(KubumixOne.ttf) format('truetype');font-weight:400;font-style:normal}.highlight,.lang-btn,.logo,body,button,h2,input{font-family:KubumixOne,sans-serif!important}body{background-color:#0a0b10;display:flex;justify-content:center;align-items:center;height:100vh;margin:0}.card{background:#fff;padding:35px;border-radius:15px;width:360px;box-shadow:0 4px 15px rgba(0,0,0,.08);text-align:center}.lang-switch{display:flex;justify-content:center;gap:10px;margin-bottom:20px}.lang-btn{background:#fff;border:2px solid #e6198e;color:#e6198e;padding:4px 15px;border-radius:20px;cursor:pointer;font-size:12px;transition:.2s}.lang-btn.active{background:#e6198e;color:#fff}.logo{color:#e6198e;font-size:28px;margin-bottom:10px;letter-spacing:1px}h2{font-size:18px;color:#222;margin-bottom:25px;font-weight:400}.input-group{text-align:left;margin-bottom:15px}label{font-size:11px;color:#777;margin-bottom:5px;display:block;font-family:sans-serif!important}input{width:100%;padding:12px;border-radius:8px;border:1px solid #dce1e6;background:#f5f6f8;color:#000;box-sizing:border-box;font-size:16px;outline:0}input:focus{border-color:#e6198e;background:#fff}.main-btn{width:100%;padding:14px;background-color:#e6198e;border:none;color:#fff;font-size:15px;border-radius:8px;cursor:pointer;margin-top:10px;transition:.2s}.main-btn:hover{background-color:#c41478;transform:translateY(-1px)}.footer{font-size:11px;color:#999;margin-top:30px;padding-top:15px;border-top:1px solid #f0f0f0;line-height:1.4;font-family:sans-serif!important}.highlight{color:#e6198e;font-size:10px}#msg{margin-top:15px;font-size:13px;font-family:sans-serif!important}</style><div class=card><div class=lang-switch><button class="lang-btn active"id=ua-btn onclick='setLang("ua")'>UA</button> <button class=lang-btn id=en-btn onclick='setLang("en")'>EN</button></div><div class=logo>KUBUMIX</div><h2 id=title>ВСТАНОВИТИ НОВИЙ ПАРОЛЬ</h2><div class=input-group><label id=label1>НОВИЙ ПАРОЛЬ</label> <input id=p1 placeholder=•••••••• type=password></div><div class=input-group><label id=label2>ПІДТВЕРДЖЕННЯ</label> <input id=p2 placeholder=•••••••• type=password></div><button class=main-btn id=btn-save onclick=doReset()>ЗБЕРЕГТИ ЗМІНИ</button><div id=msg></div><div class=footer><span class=highlight>08. ENCRYPTED STORAGE</span><br><span id=footer-text>Ваш новий пароль буде автоматично захешовано (SCRYPT) при наступному вході в гру</span></div></div><script src=https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js></script><script src=https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js></script><script>const firebaseConfig = {
        apiKey: "AIzaSyA_LwiXGQge-0zC1xqZFyeUmZWhKs4oYgY",
        authDomain: "kubumixapp.firebaseapp.com",
        projectId: "kubumixapp",
        appId: "1:6501395850:web:848d98df0eafb1aa0cec73"
    };
    firebase.initializeApp(firebaseConfig);

    const translations = {
        ua: {
            title: "ВСТАНОВИТИ НОВИЙ ПАРОЛЬ",
            label1: "НОВИЙ ПАРОЛЬ",
            label2: "ПІДТВЕРДЖЕННЯ",
            btn: "ЗБЕРЕГТИ ЗМІНИ",
            footer: "Ваш новий пароль буде автоматично захешовано (SCRYPT) при наступному вході в гру",
            mismatch: "Паролі не співпадають",
            success: "Готово! Тепер повертайтесь у гру.",
            error: "Помилка: Посилання застаріло"
        },
        en: {
            title: "SET NEW PASSWORD",
            label1: "NEW PASSWORD",
            label2: "CONFIRM PASSWORD",
            btn: "SAVE CHANGES",
            footer: "Your new password will be automatically hashed (SCRYPT) the next time you log in to the game",
            mismatch: "Passwords do not match",
            success: "Done! Now return to the game.",
            error: "Error: Link expired"
        }
    };

    let currentLang = 'ua';

    function setLang(lang) {
        currentLang = lang;
        document.getElementById('title').innerText = translations[lang].title;
        document.getElementById('label1').innerText = translations[lang].label1;
        document.getElementById('label2').innerText = translations[lang].label2;
        document.getElementById('btn-save').innerText = translations[lang].btn;
        document.getElementById('footer-text').innerText = translations[lang].footer;
        document.getElementById('msg').innerText = "";

        document.getElementById('ua-btn').classList.toggle('active', lang === 'ua');
        document.getElementById('en-btn').classList.toggle('active', lang === 'en');
    }

    function doReset() {
        const p1 = document.getElementById('p1').value;
        const p2 = document.getElementById('p2').value;
        const status = document.getElementById('msg');
        const code = new URLSearchParams(window.location.search).get('oobCode');

        if (p1 !== p2) { 
            status.innerText = translations[currentLang].mismatch; 
            status.style.color = "red"; 
            return; 
        }

        firebase.auth().confirmPasswordReset(code, p1)
            .then(() => {
                status.innerText = translations[currentLang].success;
                status.style.color = "green";
                document.getElementById('btn-save').disabled = true;
            })
            .catch((e) => {
                status.innerText = translations[currentLang].error;
                status.style.color = "red";
            });
    }</script>